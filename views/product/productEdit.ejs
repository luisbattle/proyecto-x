<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head', {title:"Edicion de Productos"})%>
<link rel="stylesheet" href="/stylesheets/edicion.css">


<body>
    <%- include('../partials/header')%>
    <h1>Edición de producto: <%= product.id %> </h1>
    <div class="contenedor-grande dp-flex">
        <img src="/images/<%= product.image %>" alt="click para cambiar la imagen" onclick="imgUpload">
        <div class="formulario dp-flex">
            <form action="/product/edit/<%= product.id  %>?_method=PUT" method="POST" enctype="multipart/form-data" id="formulario">
                <div class="datos dp-flex">

                    <div class="dp-flex f-column espacio-botones">
                        <label for="">Nombre del producto:</label>
                        
                        <input type="text" name="name" id="name" placeholder="Nombre" class="form-control margen-tres"
                            value="<%= product.name %> " required>
                            <p id="formulario__input-error" class="formulario__input-error">Debe colocar un nombre de producto.</p>
                    </div>
                    
                    
                    <div class="dp-flex f-column">
                        <label for="">Precio:</label>
                        <input type="number" name="price" id="price" placeholder="Precio" class="form-control margen-tres"
                            value="<%= product.price %>" required>
                        <p class="formulario__input-error">Debe colocar un precio.</p>
                    </div>
                    
                    
                    
                    <div class=" dp-flex f-column">
                        <label for="">Descripción:</label>
                        <textarea type="text" rows="4" name="detail" id="detail" placeholder="Descripción" class="form-control margen-tres" required><%= product.detail %></textarea>
                        <p class="formulario__input-error">Debe colocar una descripcion.</p>
                    </div>
                    
                    
                    <div class="dp-flex f-column">
                        <label for="">Categoría:</label>
                        <select class="form-control margen-tres" id="sel1" name="category">
                            <% categories.forEach(category => { %>
                            <% var selected =(product.category_id == category.id)?"selected":""%>
                            <option value=<%= category.id %> <%= selected  %>><%= category.name  %> </option>
                            <% }); %>
                        </select>
                        <p class="formulario__input-error">Debe seleccionar una categoria.</p>
                    </div>
                    <div class=" dp-flex">
                        <input type="file" name="image form-control margen-tres">
                    </div>

                </div>
                <div class="margen-de-boton">
                    <button class="btn btn-sm btn-success" type="submit">Guardar producto</button>
                </div>
            </form>
            
            
            
            
            <form action="/product/delete/<%= product.id %>?_method=DELETE" method="POST">
                <div>
                    <button class="btn btn-sm btn-danger">Eliminar producto</button>
                </div>
            </form>

        </div>
    </div>
    <%- include('../partials/footer') %>
    <script src="../../js/product-edit-validator.js"></script>
    

</body>

</html>